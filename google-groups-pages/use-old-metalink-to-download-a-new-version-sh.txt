<h1>use-old-metalink-to-download-a-new-version-sh</h1>
<pre><br>#<br>#<br>#<br># (sorry text is bad)<br># this script delete unwanted data (as size and filechecks) from older metalink version and change version number<br># it can be used for quickly download in a few days ubuntu 7.10 without original metalink but with help of latest <br># metalink known (7.04)... of course:<br># 1) they are no filechecks (size and CRC) during the download<br># 2) sheme mirror must be the same than last release...<br># "http://releases.ubuntu.com/7.04/ubuntu-7.04-desktop-i386.iso"&nbsp; link will be changed for this metalink <br># "http://releases.ubuntu.com/7.10/ubuntu-7.10-desktop-i386.iso"&nbsp; ;)<br>#<br># nocopyright sebastien@willemijns.com v1.0 <br>#<br># WARNING ! this metalink is too old (autumn 2006) and it seems they are a lot of directories errors (".poll" directories)<br># Actually (october 2007) this exemple script works yet but the download only begin after 5 minutes (too many old or bad URL)<br>#<br>#<br>#<br>#<br>metalinknumberversion=6_10<br>filename=ubuntu-$metalinknumberversion-desktop-i386_iso.metalink<br>directory=http://download.packages.ro/metalink/ubuntu/<br># do not forget to change value in the last perl line<br>#<br>#<br>#<br>#<br>#<br>wget $directory$filename<br>perl -ne'/\074size\076/||print' $filename &gt; temp02<br>perl -ne'/\074hash /||print' temp02 &gt; temp03<br>perl -ne'/\074pieces /||print' temp03 &gt; temp04<br>perl -ne'/\057pieces/||print' temp04 &gt; temp05<br>perl -ne'/\057verification/||print' temp05 &gt; temp06<br>perl -ne'/\074verification/||print' temp06 &gt; temp07<br>perl -ne'/magnet\072\077/||print' temp07 &gt; temp08<br>perl -ne'/\074url type="magnet/||print' temp08 &gt; temp09<br>perl -ne'/ \074\057url\076/||print' temp09 &gt; temp10<br># we change version number&nbsp; ("6.10" = "6\05610"&nbsp; and "7.04" = "7\05604") <br>perl -pe '$count++ if s/6\05610/7\05604/ ; END { exit ($count &gt; 0 ? 0 : 1) }' temp10 &gt; temp11<br>rm log<br>aria2c -p -j 45 -M temp11 -l log<br></pre>
&nbsp;
<wbr>